openapi: 3.0.1
info:
  title: API-PS
  description: ApiGw-Pharmasuite
  termsOfService: https://www.adasoft.com/terms-of-use
  contact:
    name: Adasoft
    url: https://www.adasoft.com/contact-us
    email: info.USA@adasoft.com
  license:
    name: Comercial License
    url: https://www.adasoft.com/services/home
  version: v1
servers:
- url: http://localhost:9102
  description: Generated server url
tags:
- name: exception
  description: Operations related to exception management
- name: recipe
  description: Operations related to recipe management
- name: health
  description: Health application
- name: order
  description: Operations related to order management
- name: workflow
  description: Operations related to workflow management
- name: dashboard
  description: Operations related to dashboard management
- name: scheduler-job
  description: Operations related to scheduler management
- name: batch
  description: Operations related to batch management
paths:
  /mcp:
    post:
      tags:
      - mcp-controller
      operationId: handleMCPRequest
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MCPRequest"
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MCPResponse"
  /api/scheduler-job/trigger:
    post:
      tags:
      - scheduler-job
      summary: Trigger a job
      description: Trigger a specific job immediately by name.
      operationId: triggerJob
      parameters:
      - name: jobName
        in: query
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                type: boolean
  /api/scheduler-job/delete:
    post:
      tags:
      - scheduler-job
      summary: Delete a job
      description: Delete a specific job by name.
      operationId: deleteJob
      parameters:
      - name: jobName
        in: query
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                type: boolean
  /api/scheduler-job/delete-all:
    post:
      tags:
      - scheduler-job
      summary: Delete all jobs
      description: Delete all jobs from the scheduler.
      operationId: deleteAllJobs
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                type: boolean
  /mcp/info:
    get:
      tags:
      - mcp-controller
      operationId: getServerInfo
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                type: object
                additionalProperties:
                  type: object
  /health:
    get:
      tags:
      - scheduler-job
      - health
      summary: Get health status
      description: Return a list of status.
      operationId: getHealth
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/HealthWebsocketResponse"
  /api/workflow:
    get:
      tags:
      - workflow
      summary: Get filtered workflow process order
      description: "Returns a list of workflow filtered by state, date range, and\
        \ interval."
      operationId: getWorkflowProcessOrders
      parameters:
      - name: status
        in: query
        description: "Filter by state. Allowed values: defined, exploded, released,\
          \ inprocess, finished, annulled, cancelled, reactivated, productionreviewed,\
          \ reviewed"
        required: false
        explode: true
        schema:
          type: array
          enum:
          - defined
          - exploded
          - released
          - inprocess
          - finished
          - annulled
          - cancelled
          - reactivated
          - productionreviewed
          - reviewed
      - name: varSubscribe
        in: query
        required: false
        schema:
          type: string
          description: "Variable to subscribe, when send var create and update socket'"
          example: order_27.oee
      - name: timeQuartz
        in: query
        required: false
        schema:
          type: integer
          description: "Time job quartz for update data websocket, default 20000ms'"
          format: int64
          example: 20000
      - name: timeCache
        in: query
        required: false
        schema:
          type: integer
          description: "Time cache, default 1m in application.yml."
          format: int32
      - name: enableCache
        in: query
        required: false
        schema:
          type: boolean
          description: "Enable cache, default false"
      - name: lastMonthsInterval
        in: query
        required: false
        schema:
          type: integer
          description: Range in months to filter. The default value in application.yml
            is 5. Its highly recommended to use this filter for improve querys.
          format: int32
          example: 3
      - name: initCreationDate
        in: query
        required: false
        schema:
          type: string
          description: |-
            Filter by creation date in ISO 8601-UTC. Example: '2024-12-10T00:00:00Z'. Format: 'yyyy-MM-ddTHH:mm:ssX
            '
          example: 2024-10-20T23:59:59Z
      - name: finishCreationDate
        in: query
        required: false
        schema:
          type: string
          description: |-
            Filter by finish creation date in ISO 8601-UTC. '2024-12-20T23:59:59Z' Format: 'yyyy-MM-ddTHH:mm:ssX
            '
          example: 2024-12-20T23:59:59Z
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Workflow"
  /api/scheduler-job/keys:
    get:
      tags:
      - scheduler-job
      summary: Get all job keys
      description: Return a list of job keys.
      operationId: getJobKeys
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                type: array
                items:
                  type: string
  /api/scheduler-job/details:
    get:
      tags:
      - scheduler-job
      summary: Get all job details
      description: Return a list of job details.
      operationId: getJobDetails
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                type: array
                items:
                  type: object
                  additionalProperties:
                    type: object
  /api/scheduler-job/all:
    get:
      tags:
      - scheduler-job
      summary: Get all jobs
      description: Return a list of all jobs with full info.
      operationId: getAllJobs
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                type: array
                items:
                  type: object
                  additionalProperties:
                    type: object
  /api/recipe:
    get:
      tags:
      - recipe
      summary: Get filtered recipes
      description: Returns a list of recipes filtered.
      operationId: getAllRecipes
      parameters:
      - name: status
        in: query
        description: "Filter by state. Allowed values: Valid, Edit, Verification,\
          \ Scheduled, Archive"
        required: false
        explode: true
        schema:
          type: array
          enum:
          - Valid
          - Edit
          - Verification
          - Scheduled
          - Archive
        example: Valid
      - name: varSubscribe
        in: query
        required: false
        schema:
          type: string
          description: "Variable to subscribe, when send var create and update socket'"
          example: order_27.oee
      - name: timeQuartz
        in: query
        required: false
        schema:
          type: integer
          description: "Time job quartz for update data websocket, default 20000ms'"
          format: int64
          example: 20000
      - name: timeCache
        in: query
        required: false
        schema:
          type: integer
          description: "Time cache, default 1m in application.yml."
          format: int32
      - name: enableCache
        in: query
        required: false
        schema:
          type: boolean
          description: "Enable cache, default false"
      - name: lastMonthsInterval
        in: query
        required: false
        schema:
          type: integer
          description: Range in months to filter. The default value in application.yml
            is 5. Its highly recommended to use this filter for improve querys.
          format: int32
          example: 3
      - name: initCreationDate
        in: query
        required: false
        schema:
          type: string
          description: |-
            Filter by creation date in ISO 8601-UTC. Example: '2024-12-10T00:00:00Z'. Format: 'yyyy-MM-ddTHH:mm:ssX
            '
          example: 2024-10-20T23:59:59Z
      - name: finishCreationDate
        in: query
        required: false
        schema:
          type: string
          description: |-
            Filter by finish creation date in ISO 8601-UTC. '2024-12-20T23:59:59Z' Format: 'yyyy-MM-ddTHH:mm:ssX
            '
          example: 2024-12-20T23:59:59Z
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Recipe"
  /api/order/process-order:
    get:
      tags:
      - order
      summary: Get filtered orders
      description: "Returns a list of orders filtered by state, date range, and interval."
      operationId: getProcessOrders
      parameters:
      - name: status
        in: query
        description: "Filter by state. Allowed values: defined, exploded, released,\
          \ inprocess, finished, annulled, cancelled, reactivated, productionreviewed,\
          \ reviewed"
        required: false
        explode: true
        schema:
          type: array
          enum:
          - defined
          - exploded
          - released
          - inprocess
          - finished
          - annulled
          - cancelled
          - reactivated
          - productionreviewed
          - reviewed
      - name: varSubscribe
        in: query
        required: false
        schema:
          type: string
          description: "Variable to subscribe, when send var create and update socket'"
          example: order_27.oee
      - name: timeQuartz
        in: query
        required: false
        schema:
          type: integer
          description: "Time job quartz for update data websocket, default 20000ms'"
          format: int64
          example: 20000
      - name: timeCache
        in: query
        required: false
        schema:
          type: integer
          description: "Time cache, default 1m in application.yml."
          format: int32
      - name: enableCache
        in: query
        required: false
        schema:
          type: boolean
          description: "Enable cache, default false"
      - name: lastMonthsInterval
        in: query
        required: false
        schema:
          type: integer
          description: Range in months to filter. The default value in application.yml
            is 5. Its highly recommended to use this filter for improve querys.
          format: int32
          example: 3
      - name: initCreationDate
        in: query
        required: false
        schema:
          type: string
          description: |-
            Filter by creation date in ISO 8601-UTC. Example: '2024-12-10T00:00:00Z'. Format: 'yyyy-MM-ddTHH:mm:ssX
            '
          example: 2024-10-20T23:59:59Z
      - name: finishCreationDate
        in: query
        required: false
        schema:
          type: string
          description: |-
            Filter by finish creation date in ISO 8601-UTC. '2024-12-20T23:59:59Z' Format: 'yyyy-MM-ddTHH:mm:ssX
            '
          example: 2024-12-20T23:59:59Z
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ProcessOrder"
  /api/exception:
    get:
      tags:
      - exception
      summary: Get filtered exception
      description: Return a list of exception filtered.
      operationId: getAllException
      parameters:
      - name: status
        in: query
        description: "Filter by state. Allowed values: open, closed , to_be_closed,\
          \ na ( not apply )"
        required: false
        explode: true
        schema:
          type: array
          enum:
          - open
          - closed
          - to_be_closed
          - na
      - name: riskLevel
        in: query
        description: "Filter by risk level. Allowed values: none, low, lowWithMandatoryComment,\
          \ medium, mediumWithMandatoryComment, high, highWithMandatoryComment"
        required: false
        explode: true
        schema:
          type: array
          enum:
          - none
          - low
          - lowWithMandatoryComment
          - medium
          - mediumWithMandatoryComment
          - high
          - highWithMandatoryComment
      - name: varSubscribe
        in: query
        required: false
        schema:
          type: string
          description: "Variable to subscribe, when send var create and update socket'"
          example: order_27.oee
      - name: timeQuartz
        in: query
        required: false
        schema:
          type: integer
          description: "Time job quartz for update data websocket, default 20000ms'"
          format: int64
          example: 20000
      - name: timeCache
        in: query
        required: false
        schema:
          type: integer
          description: "Time cache, default 1m in application.yml."
          format: int32
      - name: enableCache
        in: query
        required: false
        schema:
          type: boolean
          description: "Enable cache, default false"
      - name: lastMonthsInterval
        in: query
        required: false
        schema:
          type: integer
          description: Range in months to filter. The default value in application.yml
            is 5. Its highly recommended to use this filter for improve querys.
          format: int32
          example: 3
      - name: initCreationDate
        in: query
        required: false
        schema:
          type: string
          description: |-
            Filter by creation date in ISO 8601-UTC. Example: '2024-12-10T00:00:00Z'. Format: 'yyyy-MM-ddTHH:mm:ssX
            '
          example: 2024-10-20T23:59:59Z
      - name: finishCreationDate
        in: query
        required: false
        schema:
          type: string
          description: |-
            Filter by finish creation date in ISO 8601-UTC. '2024-12-20T23:59:59Z' Format: 'yyyy-MM-ddTHH:mm:ssX
            '
          example: 2024-12-20T23:59:59Z
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ExceptionPS"
  /api/dashboard/exceptions/summary:
    get:
      tags:
      - dashboard
      summary: Get exceptions summary dashboard
      description: Returns a list of exceptions summary dashboard.
      operationId: getAllExceptionsSummary
      parameters:
      - name: varSubscribe
        in: query
        required: false
        schema:
          type: string
          description: "Variable to subscribe, when send var create and update socket'"
          example: order_27.oee
      - name: timeQuartz
        in: query
        required: false
        schema:
          type: integer
          description: "Time job quartz for update data websocket, default 20000ms'"
          format: int64
          example: 20000
      - name: timeCache
        in: query
        required: false
        schema:
          type: integer
          description: "Time cache, default 1m in application.yml."
          format: int32
      - name: enableCache
        in: query
        required: false
        schema:
          type: boolean
          description: "Enable cache, default false"
      - name: lastMonthsInterval
        in: query
        required: false
        schema:
          type: integer
          description: Range in months to filter. The default value in application.yml
            is 5. Its highly recommended to use this filter for improve querys.
          format: int32
          example: 3
      - name: initCreationDate
        in: query
        required: false
        schema:
          type: string
          description: |-
            Filter by creation date in ISO 8601-UTC. Example: '2024-12-10T00:00:00Z'. Format: 'yyyy-MM-ddTHH:mm:ssX
            '
          example: 2024-10-20T23:59:59Z
      - name: finishCreationDate
        in: query
        required: false
        schema:
          type: string
          description: |-
            Filter by finish creation date in ISO 8601-UTC. '2024-12-20T23:59:59Z' Format: 'yyyy-MM-ddTHH:mm:ssX
            '
          example: 2024-12-20T23:59:59Z
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Dashboard"
  /api/batch:
    get:
      tags:
      - batch
      summary: Get filtered batch
      description: Returns a list of batch filtered.
      operationId: getAllBatch
      parameters:
      - name: orderAssociateType
        in: query
        description: "Filter by state. [OUTPUT, INPUT ...]"
        required: false
        explode: true
        schema:
          type: array
          enum:
          - ""
      - name: orderAssociateSubtype
        in: query
        description: "Filter by state. [PRODUCTION_OF_OUTPUT_MATERIAL, BATCH_GENERATION\
          \ ...]"
        required: false
        explode: true
        schema:
          type: array
          enum:
          - ""
      - name: varSubscribe
        in: query
        required: false
        schema:
          type: string
          description: "Variable to subscribe, when send var create and update socket'"
          example: order_27.oee
      - name: timeQuartz
        in: query
        required: false
        schema:
          type: integer
          description: "Time job quartz for update data websocket, default 20000ms'"
          format: int64
          example: 20000
      - name: timeCache
        in: query
        required: false
        schema:
          type: integer
          description: "Time cache, default 1m in application.yml."
          format: int32
      - name: enableCache
        in: query
        required: false
        schema:
          type: boolean
          description: "Enable cache, default false"
      - name: lastMonthsInterval
        in: query
        required: false
        schema:
          type: integer
          description: Range in months to filter. The default value in application.yml
            is 5. Its highly recommended to use this filter for improve querys.
          format: int32
          example: 3
      - name: initCreationDate
        in: query
        required: false
        schema:
          type: string
          description: |-
            Filter by creation date in ISO 8601-UTC. Example: '2024-12-10T00:00:00Z'. Format: 'yyyy-MM-ddTHH:mm:ssX
            '
          example: 2024-10-20T23:59:59Z
      - name: finishCreationDate
        in: query
        required: false
        schema:
          type: string
          description: |-
            Filter by finish creation date in ISO 8601-UTC. '2024-12-20T23:59:59Z' Format: 'yyyy-MM-ddTHH:mm:ssX
            '
          example: 2024-12-20T23:59:59Z
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Batch"
components:
  schemas:
    MCPRequest:
      type: object
      properties:
        jsonrpc:
          type: string
        method:
          type: string
        params:
          type: object
        id:
          type: object
    MCPError:
      type: object
      properties:
        code:
          type: integer
          format: int32
        message:
          type: string
        data:
          type: object
    MCPResponse:
      type: object
      properties:
        jsonrpc:
          type: string
        result:
          type: object
        error:
          $ref: "#/components/schemas/MCPError"
        id:
          type: object
    HealthWebsocketResponse:
      type: object
      properties:
        sessions:
          type: array
          items:
            type: string
        subsByMsg:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
        subsBySession:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
        jobs:
          type: array
          items:
            type: object
            additionalProperties:
              type: object
    ErrorApi:
      type: object
      properties:
        code:
          type: string
        description:
          type: string
        message:
          type: string
    Workflow:
      type: object
      properties:
        errors:
          type: array
          items:
            $ref: "#/components/schemas/ErrorApi"
        timeServer:
          type: string
          format: date-time
          nullable: true
        key:
          type: integer
          format: int64
        name:
          type: string
        description:
          type: string
        status:
          type: string
        productionRelevant:
          type: boolean
        masterWorkflowName:
          type: string
        masterWorkflowDescription:
          type: string
        creationDate:
          type: string
          format: date-time
          nullable: true
        actualStart:
          type: string
          format: date-time
          nullable: true
        actualFinish:
          type: string
          format: date-time
          nullable: true
        appendable:
          type: boolean
        ordersAssociated:
          type: string
        upAssociated:
          type: array
          items:
            type: string
      description: WorkFlow data
    BomItems:
      type: object
      properties:
        materialIdentifier:
          type: string
        quantity:
          $ref: "#/components/schemas/MeasureValue"
        position:
          type: string
    Material:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        category:
          type: string
        description:
          type: string
        unitOfMeasure:
          type: string
    MeasureValue:
      type: object
      properties:
        unitOfMeasure:
          type: string
        value:
          type: number
        scale:
          type: integer
          format: int32
    Recipe:
      type: object
      properties:
        errors:
          type: array
          items:
            $ref: "#/components/schemas/ErrorApi"
        timeServer:
          type: string
          format: date-time
          nullable: true
        key:
          type: integer
          format: int64
        name:
          type: string
        status:
          type: string
        revision:
          type: string
        creationDate:
          type: string
          format: date-time
          nullable: true
        effectivityStartTime:
          type: string
          format: date-time
          nullable: true
        effectivityEndTime:
          type: string
          format: date-time
          nullable: true
        material:
          $ref: "#/components/schemas/Material"
        quantity:
          $ref: "#/components/schemas/MeasureValue"
        plannedQuantity:
          type: string
        procedure:
          type: string
        accessPrivilege:
          type: string
        bomItemsList:
          type: array
          items:
            $ref: "#/components/schemas/BomItems"
      description: Basic recipe data
    ProcessOrder:
      type: object
      properties:
        errors:
          type: array
          items:
            $ref: "#/components/schemas/ErrorApi"
        timeServer:
          type: string
          format: date-time
          nullable: true
        key:
          type: integer
          format: int64
        name:
          type: string
        quantity:
          $ref: "#/components/schemas/MeasureValue"
        quantityFinal:
          type: string
        consumedQuantity:
          type: string
        targetBatch:
          type: string
        material:
          $ref: "#/components/schemas/Material"
        creationDate:
          type: string
          format: date-time
          nullable: true
        plannedStart:
          type: string
          format: date-time
          nullable: true
        plannedFinish:
          type: string
          format: date-time
          nullable: true
        actualStart:
          type: string
          format: date-time
          nullable: true
        actualFinish:
          type: string
          format: date-time
          nullable: true
        erpFinishDate:
          type: string
          format: date-time
          nullable: true
        erpStartDate:
          type: string
          format: date-time
          nullable: true
        status:
          type: string
        wfAssociated:
          type: array
          items:
            type: string
        workCenter:
          type: string
        location:
          type: string
        recipeName:
          type: string
        recipeDescription:
          type: string
        batchName:
          type: string
      description: Process order data
    ExceptionComment:
      type: object
      properties:
        creationTime:
          type: string
          format: date-time
          nullable: true
        description:
          type: string
        capaId:
          type: string
        externalIdentifier:
          type: string
    ExceptionPS:
      type: object
      properties:
        errors:
          type: array
          items:
            $ref: "#/components/schemas/ErrorApi"
        timeServer:
          type: string
          format: date-time
          nullable: true
        key:
          type: integer
          format: int64
        description:
          type: string
        creationDate:
          type: string
          format: date-time
          nullable: true
        risk:
          type: string
        category:
          type: string
        result:
          type: string
        classification:
          type: string
        status:
          type: string
        capaId:
          type: string
        reference:
          type: string
        comments:
          type: array
          items:
            $ref: "#/components/schemas/ExceptionComment"
    CleaningsCalibration:
      type: object
      properties:
        roomsEquipmentToBeCleaned:
          type: string
        equipmentToExpiredClean:
          type: string
        roomToExpiredClean:
          type: string
        equipmentNotCalibrated:
          type: string
        equipmentToBeCalibrated:
          type: string
        equipmentToBeTested:
          type: string
      description: CleaningsCalibration data
    Dashboard:
      type: object
      properties:
        errors:
          type: array
          items:
            $ref: "#/components/schemas/ErrorApi"
        timeServer:
          type: string
          format: date-time
          nullable: true
        production:
          $ref: "#/components/schemas/Production"
        exceptions:
          $ref: "#/components/schemas/Exceptions"
        equipmentsRooms:
          $ref: "#/components/schemas/EquipmentsRooms"
        cleaningsCalibration:
          $ref: "#/components/schemas/CleaningsCalibration"
      description: Dashboard data
    EquipmentsRooms:
      type: object
      properties:
        availableWDRooms:
          type: string
        productionRooms:
          type: string
        packagingLines:
          type: string
      description: EquipmentsRooms data
    Exceptions:
      type: object
      properties:
        ordersRunning:
          type: integer
          format: int64
        ordersFinished:
          type: integer
          format: int64
        averageTimeOpenException:
          type: string
        openExceptionRiskNone:
          type: integer
          format: int32
        openExceptionRiskLow:
          type: integer
          format: int32
        openExceptionRiskMedium:
          type: integer
          format: int32
        openExceptionRiskHigh:
          type: integer
          format: int32
      description: Exceptions data
    Production:
      type: object
      properties:
        orderExecution:
          type: string
        productionOrders:
          type: string
        packagingOrders:
          type: string
        wdorders:
          type: string
      description: Production data
    Batch:
      type: object
      properties:
        errors:
          type: array
          items:
            $ref: "#/components/schemas/ErrorApi"
        timeServer:
          type: string
          format: date-time
          nullable: true
        key:
          type: integer
          format: int64
        name:
          type: string
        status:
          type: string
        material:
          $ref: "#/components/schemas/Material"
        quantity:
          $ref: "#/components/schemas/MeasureValue"
        potency:
          $ref: "#/components/schemas/MeasureValue"
        totalConsumed:
          $ref: "#/components/schemas/MeasureValue"
        expiryDate:
          type: string
          format: date-time
          nullable: true
        retestDate:
          type: string
          format: date-time
          nullable: true
        productionDate:
          type: string
          format: date-time
          nullable: true
        nextInspectionDate:
          type: string
          format: date-time
          nullable: true
        sublots:
          type: array
          items:
            $ref: "#/components/schemas/Sublot"
        transactionHistory:
          type: array
          items:
            $ref: "#/components/schemas/TransactionHistory"
      description: Batch data
    Sublot:
      type: object
      properties:
        name:
          type: string
        key:
          type: integer
          format: int64
        quantity:
          $ref: "#/components/schemas/MeasureValue"
        quantityConsumed:
          $ref: "#/components/schemas/MeasureValue"
        material:
          $ref: "#/components/schemas/Material"
        batchIdentifier:
          type: string
        productionOrderStep:
          type: string
        storageLocation:
          type: string
        storageArea:
          type: string
        warehouse:
          type: string
        tare:
          type: string
        productionDate:
          type: string
          format: date-time
          nullable: true
    TransactionHistory:
      type: object
      properties:
        orderId:
          type: string
        time:
          type: string
          format: date-time
          nullable: true
        type:
          type: string
        subtype:
          type: string
        orderStep:
          type: string
        batchIdNew:
          type: string
        batchIdOld:
          type: string
        sublotIdNew:
          type: string
        sublotIdOld:
          type: string
